{% extends "base.html" %}

{% block title %}
    TuftedFox - Admin Dashboard
{% endblock %}

{% block head %}
    <style>
        .element-block{
            width: 600px;
        }
        .pre-scroll{
            overflow: auto;
            max-height: 30em; /* or adjust to your desired height */
        }

        pre{
            display: block;
            background-color: #030303;
            border: 0px;
            border-radius: 10px;
            padding: 10px;
            font-family: monospace;
            font-size: 14px;
            color: #f5f5f5;
            text-align: left;
        }
        #admin-links{
            background-color: #030303;
            border: 0px;
            border-radius: 10px;
            padding: 10px;
            font-family: monospace;
            font-size: 14px;
            color: #f5f5f5;
            text-align: left;
        }
    </style>
{% endblock %}

{% block content %}
{{ block_header('Admin Dashboard', random_icon)}}
<center>
    <p id="uptime"></p>
    <div id="admin-links">
        &bull; <a href="/admin/count">Daily Page Hits</a><br>
        ----------------------------<br>
        &bull; <a href="/admin/messages">{{ message_count }} Messages</a><br>
        &bull; <a href="/admin/orders">{{ order_count }} Orders</a><br>
        ----------------------------<br>
        &bull; <a href="/admin/thumbnail">Update Thumbnails</a><br>
        &bull; <a href="/admin/update">Update Server</a><br>
        ----------------------------<br>
        &bull; <a href="/logout">Logout</a><br>
    </div>
</center>
{{ block_footer()}}

{{ block_header('Log', random_icon)}} 
    <pre><div class="pre-scroll"><code> {{ log_content }} </code></div></pre>
    <p>Server birthdate: 11/3/2023</p>
{{ block_footer() }}

<script>
function calculateUptime() {
    var startTime = new Date('{{ app_start_time }}' * 1000);
    var uptime = new Date() - startTime;
    var seconds = Math.floor(uptime / 1000);
    var minutes = Math.floor(seconds / 60);
    var hours = Math.floor(minutes / 60);
    var days = Math.floor(hours / 24);

    seconds = seconds % 60;
    minutes = minutes % 60;
    hours = hours % 24;

    document.getElementById('uptime').innerHTML = `${days} days, ${hours} hours, ${minutes} minutes, ${seconds} seconds`;
}

calculateUptime();
setInterval(calculateUptime, 1000); 
</script>
{% endblock %}